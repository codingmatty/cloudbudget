{"version":3,"sources":["../../src/db/index.js"],"names":[],"mappings":";;;;;;QAYgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAJhB,IAAM,KAAK,mBAAS,OAAT,CAAiB,iBAAO,QAAQ,GAAR,CAAY,QAAZ,CAAP,CAA6B,EAA7B,CAAtB;;kBAES;AAER,SAAS,kBAAT,CAA4B,yBAA5B,EAAuD;AAC5D,SAAO;AACL,aAAS,IAAT;AACA,cAAU,IAAV;AACA,eAAW,mBAAC,GAAD,EAAM,GAAN,EAAc;AACvB,aAAO,IAAI,GAAJ,CADgB;AAEvB,aAAO,IAAI,GAAJ,CAFgB;AAGvB,UAAI,EAAJ,GAAS,IAAI,EAAJ,CAAO,QAAP,EAAT,CAHuB;AAIvB,UAAI,IAAI,IAAJ,EAAU;AACZ,YAAI,IAAJ,GAAW,IAAI,IAAJ,YAAoB,gBAAM,QAAN,GAAiB,IAAI,IAAJ,CAAS,QAAT,EAArC,GAA2D,IAAI,IAAJ,CAD1D;OAAd;AAGA,UAAI,yBAAJ,EAA+B,0BAA0B,GAA1B,EAA+B,GAA/B,EAA/B;KAPS;GAHb,CAD4D;CAAvD;;QAiBL;QACA;QACA;QACA;QACA","file":"index.js","sourcesContent":["import mongoose, { Types } from 'mongoose';\nimport User from './user';\nimport Client from './client';\nimport Account from './account';\nimport AccessToken from './accessToken';\nimport Transaction from './transaction';\nimport config from '../../config.json';\n\nconst db = mongoose.connect(config[process.env.NODE_ENV].db);\n\nexport default db;\n\nexport function defaultJSONOptions(specificTransformFunction) {\n  return {\n    getters: true,\n    virtuals: true,\n    transform: (doc, ret) => {\n      delete ret._id;\n      delete ret.__v;\n      ret.id = ret.id.toString();\n      if (ret.user) {\n        ret.user = ret.user instanceof Types.ObjectId ? ret.user.toString() : ret.user;\n      }\n      if (specificTransformFunction) specificTransformFunction(doc, ret);\n    }\n  };\n}\n\nexport {\n  User,\n  Client,\n  AccessToken,\n  Account,\n  Transaction\n};\n"]}