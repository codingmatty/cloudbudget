{"version":3,"sources":["../src/app.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYA,IAAM,MAAM,wBAAN;;;;;;AAMN,IAAI,IAAI,GAAJ,CAAQ,KAAR,MAAmB,aAAnB,EAAkC;AACpC,MAAI,GAAJ,CAAQ,sBAAO,KAAP,CAAR,EADoC;CAAtC;;;AAKA,IAAI,GAAJ,CAAQ,6BAAR;AACA,IAAI,GAAJ,CAAQ,qBAAW,IAAX,EAAR;AACA,IAAI,GAAJ,CAAQ,qBAAW,UAAX,CAAsB,EAAE,UAAU,KAAV,EAAxB,CAAR;;AAEA,IAAI,GAAJ,CAAQ,mBAAS,UAAT,EAAR;AACA,IAAI,GAAJ,CAAQ,mBAAS,OAAT,EAAR;AACA;;AAEA,IAAI,GAAJ,CAAQ,SAAR;AACA,IAAI,GAAJ,CAAQ,SAAR,EAAmB,kBAAQ,MAAR,CAAe,YAAY,wBAAZ,CAAlC;AACA,IAAI,GAAJ,CAAQ,IAAR,EAAc,UAAC,GAAD,EAAM,GAAN,EAAc;AAC1B,MAAI,QAAJ,CAAa,yBAAb,EAAwC,EAAE,MAAM,YAAY,MAAZ,EAAhD,EAD0B;CAAd,CAAd;;;AAKA,IAAI,GAAJ,CAAQ,UAAC,GAAD,EAAM,GAAN,EAAW,IAAX,EAAoB;AAC1B,MAAM,MAAM,IAAI,KAAJ,CAAU,WAAV,CAAN,CADoB;AAE1B,MAAI,MAAJ,GAAa,GAAb,CAF0B;AAG1B,OAAK,GAAL,EAH0B;CAApB,CAAR;;;;AAQA,IAAI,GAAJ,CAAQ,UAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAmB;AACzB,MAAI,MAAJ,CAAW,IAAI,MAAJ,IAAc,GAAd,CAAX,CADyB;AAEzB,MAAI,MAAJ,CAAW,OAAX,EAAoB;AAClB,aAAS,IAAI,OAAJ;AACT,WAAO,IAAI,GAAJ,CAAQ,KAAR,MAAmB,aAAnB,GAAmC,GAAnC,GAAyC,EAAzC;GAFT,EAFyB;CAAnB,CAAR;;AAQA,IAAM,OAAO,QAAQ,GAAR,CAAY,IAAZ,IAAoB,IAApB;AACb,IAAI,IAAI,GAAJ,CAAQ,KAAR,MAAmB,YAAnB,EAAiC;;AACnC,QAAM,UAAU;AACd,WAAK,aAAG,YAAH,CAAgB,yBAAhB,CAAL;AACA,YAAM,aAAG,YAAH,CAAgB,gBAAhB,CAAN;KAFI;AAIN,QAAM,SAAS,gBAAM,YAAN,CAAmB,OAAnB,EAA4B,GAA5B,CAAT;AACN,WAAO,MAAP,CAAc,IAAd,EAAoB,YAAM;AACxB,UAAM,OAAO,OAAO,OAAP,GAAiB,OAAjB;;AADW,aAGxB,CAAQ,GAAR,CAAY,gCAAZ,EAA8C,IAA9C,EAAoD,IAApD,EAHwB;KAAN,CAApB;OANmC;CAArC,MAWO;;AACL,QAAM,SAAS,IAAI,MAAJ,CAAW,IAAX,EAAiB,YAAM;AACpC,UAAM,OAAO,OAAO,OAAP,GAAiB,OAAjB;;AADuB,aAGpC,CAAQ,GAAR,CAAY,gCAAZ,EAA8C,IAA9C,EAAoD,IAApD,EAHoC;KAAN,CAA1B;OADD;CAXP;;kBAmBe","file":"app.js","sourcesContent":["import fs from 'fs';\n// import path from 'path';\nimport https from 'https';\nimport logger from 'morgan';\nimport express from 'express';\nimport passport from 'passport';\n// import favicon from 'serve-favicon';\nimport bodyParser from 'body-parser';\nimport cookieParser from 'cookie-parser';\nimport api from './api';\nimport setupPassport from './auth/auth';\n\nconst app = express();\n\n// view engine setup\n// app.set('views', path.join(__dirname, 'views'));\n// app.set('view engine', 'jade');\n\nif (app.get('env') === 'development') {\n  app.use(logger('dev'));\n}\n// app.use(favicon(__dirname + '/public/favicon.ico'));\n// app.use(express.static('public'));\napp.use(cookieParser());\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: false }));\n\napp.use(passport.initialize());\napp.use(passport.session());\nsetupPassport();\n\napp.use('/api/v1', api);\napp.use('/static', express.static(__dirname + '/../public/dist/static'));\napp.get('/*', (req, res) => {\n  res.sendFile('/public/dist/index.html', { root: __dirname + '/../' });\n});\n\n// catch 404 and forwarding to error handler\napp.use((req, res, next) => {\n  const err = new Error('Not Found');\n  err.status = 404;\n  next(err);\n});\n\n// error handlers\n// no stacktraces leaked to user if in production mode\napp.use((err, req, res) => {\n  res.status(err.status || 500);\n  res.render('error', {\n    message: err.message,\n    error: app.get('env') === 'development' ? err : {}\n  });\n});\n\nconst port = process.env.PORT || 8090;\nif (app.get('env') === 'production') {\n  const options = {\n    key: fs.readFileSync('private.cloudbudget.pem'),\n    cert: fs.readFileSync('0001_chain.pem')\n  };\n  const server = https.createServer(options, app);\n  server.listen(port, () => {\n    const host = server.address().address;\n    /* eslint-disable no-console */\n    console.log('Example app listening at %s:%s', host, port);\n  });\n} else {\n  const server = app.listen(port, () => {\n    const host = server.address().address;\n    /* eslint-disable no-console */\n    console.log('Example app listening at %s:%s', host, port);\n  });\n}\n\nexport default app;\n"]}